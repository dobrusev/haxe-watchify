<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0" />
    <title>haxe-watchify monitor</title>
    <link rel="stylesheet" media="all" href="style.css"/>
    <script type="text/javascript" src="http://cdn.socket.io/socket.io-1.3.6.js"></script>
    <script>
    var fontSize;

    function init(){
      var evtToListen = 'mouseup';
      if(typeof window.orientation !== 'undefined'){
        evtToListen = 'touchend';
      }

      document.getElementById("increaseBtn").addEventListener(evtToListen, increaseFontSize);
      document.getElementById("decreaseBtn").addEventListener(evtToListen, decreaseFontSize);

      var socket = io('http://192.168.0.5:9933/monitor');
      socket.on("connect", onConnect);
      socket.on('error', onError);
      socket.on('connection-info', addP);
      socket.on('messages', addP);

      fontSize = parseFloat(window.getComputedStyle(document.body, null).getPropertyValue('font-size'));
    }

    function onConnect(){
      addP("<span class='welcome'>haxe-watchify monitor ready</span>");
    }

    function onError(){
      addP("<span class='error'>error trying to connect haxe-watchify monitor! verify your network settings</span>");
    }

    function addP(text){
      var p = document.createElement("p");
      p.innerHTML = text;
      document.getElementById("logContainer").appendChild(p);
      window.scrollTo(0,document.body.scrollHeight);
    }

    function increaseFontSize(){
      fontSize++;
      document.body.style.fontSize = fontSize + "px";
    }

    function decreaseFontSize(){
      fontSize--;
      document.body.style.fontSize = fontSize + "px";
    }
    </script>
  </head>
  <body onload="init()">
    <div id="logContainer">
    <div id="buttonContainer">
      <a href="#" class="button" id="increaseBtn">A</a>
      <a href="#" class="button" id="decreaseBtn">a</a>
    </div>
  </body>
</html>
